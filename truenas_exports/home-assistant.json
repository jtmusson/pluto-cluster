{
  "catalog": "TRUECHARTS",
  "catalog_train": "stable",
  "chart_metadata": {
    "annotations": {
      "max_scale_version": "24.04.1",
      "min_scale_version": "24.04.0",
      "truecharts.org/SCALE-support": "true",
      "truecharts.org/category": "home-automation",
      "truecharts.org/max_helm_version": "3.14",
      "truecharts.org/min_helm_version": "3.11",
      "truecharts.org/train": "stable"
    },
    "apiVersion": "v2",
    "appVersion": "2024.5.5",
    "dependencies": [
      {
        "enabled": true,
        "name": "common",
        "repository": "oci://tccr.io/truecharts",
        "version": "23.0.10"
      }
    ],
    "description": "home-assistant App for TrueNAS SCALE",
    "home": "https://truecharts.org/charts/stable/home-assistant",
    "icon": "https://truecharts.org/img/hotlink-ok/chart-icons/home-assistant.webp",
    "keywords": [
      "home-assistant",
      "home-automation",
      "hass"
    ],
    "kubeVersion": "\u003e=1.24.0-0",
    "latest_chart_version": "25.1.8",
    "maintainers": [
      {
        "email": "info@truecharts.org",
        "name": "TrueCharts",
        "url": "https://truecharts.org"
      }
    ],
    "name": "home-assistant",
    "sources": [
      "https://github.com/cdr/code-server",
      "https://github.com/home-assistant/home-assistant",
      "https://github.com/truecharts/charts/tree/master/charts/stable/home-assistant",
      "https://hub.docker.com/r/homeassistant/home-assistant"
    ],
    "type": "application",
    "version": "25.1.8"
  },
  "config": {
    "TZ": "Europe/London",
    "addons": {
      "codeserver": {
        "enabled": true,
        "envList": [],
        "ingress": {
          "advanced": false,
          "enabled": true,
          "hosts": [
            {
              "host": "hass-vs.musson-lan.uk",
              "paths": [
                {
                  "path": "/",
                  "pathType": "Prefix"
                }
              ]
            }
          ],
          "ingressClassName": "",
          "integrations": {
            "certManager": {
              "certificateIssuer": "cloudflare-prod",
              "enabled": true
            },
            "traefik": {
              "allowCors": false,
              "enabled": true,
              "entrypoints": [
                "websecure"
              ],
              "middlewares": [
                {
                  "name": "allowlist-private",
                  "namespace": ""
                }
              ]
            }
          },
          "tls": []
        },
        "service": {
          "ports": {
            "codeserver": {
              "port": 36107
            }
          },
          "type": "ClusterIP"
        }
      },
      "netshoot": {
        "enabled": false
      },
      "vpn": {
        "type": "disabled"
      }
    },
    "cnpg": {
      "main": {
        "backups": {
          "credentials": "backblaze",
          "enabled": true,
          "retentionPolicy": "",
          "revision": ""
        },
        "cluster": {
          "instances": 1,
          "singleNode": true,
          "storage": {
            "size": "256Gi"
          },
          "walStorage": {
            "size": "256Gi"
          }
        },
        "database": "home-assistant",
        "enabled": true,
        "hibernate": false,
        "mode": "replica",
        "monitoring": {
          "disableDefaultQueries": false,
          "enablePodMonitor": true
        },
        "password": "PLACEHOLDERPASSWORD",
        "pgVersion": 16,
        "pooler": {
          "enabled": false
        },
        "recovery": {
          "enabled": false,
          "revision": "",
          "serverName": ""
        },
        "user": "home-assistant"
      }
    },
    "configmap": {
      "init": {
        "data": {
          "configuration.yaml.default": "# Configure a default setup of Home Assistant (frontend, api, etc)\ndefault_config:\n\n# Text to speech\ntts:\n  - platform: google_translate\n\ngroup: !include groups.yaml\nautomation: !include automations.yaml\nscript: !include scripts.yaml\nscene: !include scenes.yaml",
          "http.default": "http:\n  use_x_forwarded_for: true\n  trusted_proxies:\n    {{- if hasKey .Values \"ixChartContext\" }}\n    - {{ .Values.ixChartContext.kubernetes_config.cluster_cidr }}\n    {{- else }}\n      {{- range .Values.homeassistant.trusted_proxies }}\n    - {{ . }}\n      {{- end }}\n    {{- end }}",
          "init.sh": "#!/bin/sh\n{{- $haDBURL := (printf \"%s?client_encoding=utf8\" ($.Values.cnpg.main.creds.std | trimAll \"\\\"\")) }}\nconfig=\"/config/configuration.yaml\"\ndefault=\"/config/init\"\nif [ ! -f \"$config\" ]; then\n  echo \"File [$config] does NOT exist. Creating...\"\n  cp \"$default/configuration.yaml.default\" \"$config\"\nfi\nif ! grep -q \"recorder:\" \"$config\"; then\n  echo \"Section [recorder] does NOT exist in [$config]. Appending...\"\n  echo \"\" \u003e\u003e \"$config\"\n  cat \"$default/recorder.default\" \u003e\u003e \"$config\"\nfi\nif ! grep -q \"http:\" \"$config\"; then\n  echo \"Section [http] does NOT exist in [$config]. Appending...\"\n  echo \"\" \u003e\u003e \"$config\"\n  cat \"$default/http.default\" \u003e\u003e \"$config\"\nfi\n\necho \"Updating database URL\"\nyq -i '.recorder.db_url = \"{{ $haDBURL }}\"' \"$config\"\necho \"Done\"\n\necho \"Creating include files...\"\nfor include_file in groups.yaml automations.yaml scripts.yaml scenes.yaml; do\n  if [ ! -f \"/config/$include_file\" ]; then\n    echo \"File [$include_file] missing. Creating\"\n    touch \"/config/$include_file\"\n  fi\ndone\n\ncd \"/config\" || echo \"Could not change path to /config\"\necho \"Creating custom_components directory...\"\nmkdir -p \"/config/custom_components\" || echo \"custom_components directory already exists\"\n\necho \"Changing to the custom_components directory...\"\ncd \"/config/custom_components\" || echo \"Could not change path to /config/custom_components\"\n\necho \"Downloading HACS\"\nwget \"https://github.com/hacs/integration/releases/latest/download/hacs.zip\" || exit 0\n\nif [ -d \"/config/custom_components/hacs\" ]; then\n  echo \"HACS directory already exist, cleaning up...\"\n  rm -R \"/config/custom_components/hacs\"\nfi\n\necho \"Creating HACS directory...\"\nmkdir -p \"/config/custom_components/hacs\"\n\necho \"Unpacking HACS...\"\nunzip \"/config/custom_components/hacs.zip\" -d \"/config/custom_components/hacs\" \u003e/dev/null 2\u003e\u00261\n\necho \"Removing HACS zip file...\"\nrm \"/config/custom_components/hacs.zip\"\necho \"Installation complete.\"",
          "recorder.default": "recorder:\n  purge_keep_days: 30\n  commit_interval: 3\n  db_url: {{ (printf \"%s?client_encoding=utf8\" (.Values.cnpg.main.creds.std | trimAll \"\\\"\")) | quote }}"
        },
        "enabled": true
      }
    },
    "credentialsList": [
      {
        "accessKey": "REPLACED",
        "bucket": "Pluto-JTM",
        "encrKey": "REPLACED",
        "name": "backblaze",
        "path": "",
        "secretKey": "REPLACED",
        "type": "s3",
        "url": "https://s3.us-west-001.backblazeb2.com"
      }
    ],
    "deviceList": [
      {
        "enabled": true,
        "hostPath": "/dev/serial/by-id/usb-ITEAD_SONOFF_Zigbee_3.0_USB_Dongle_Plus_V2_20240124082926-if00",
        "mountPath": "/dev/ttyACM0",
        "readOnly": false,
        "type": "device"
      }
    ],
    "docs": {
      "confirmDocs": true
    },
    "donateNag": {
      "confirmDonate": true
    },
    "global": {
      "ixChartContext": {
        "addNvidiaRuntimeClass": false,
        "hasNFSCSI": true,
        "hasSMBCSI": true,
        "isInstall": false,
        "isStopped": false,
        "isUpdate": true,
        "isUpgrade": false,
        "kubernetes_config": {
          "cluster_cidr": "172.16.0.0/16",
          "cluster_dns_ip": "172.17.0.10",
          "service_cidr": "172.17.0.0/16"
        },
        "nfsProvisioner": "nfs.csi.k8s.io",
        "nvidiaRuntimeClassName": "nvidia",
        "operation": "UPDATE",
        "smbProvisioner": "smb.csi.k8s.io",
        "storageClassName": "ix-storage-class-home-assistant",
        "upgradeMetadata": {}
      },
      "stopAll": false
    },
    "homeassistant": {
      "trusted_proxies": []
    },
    "image": {
      "pullPolicy": "IfNotPresent",
      "repository": "homeassistant/home-assistant",
      "tag": "2024.5.5@sha256:031d355a2e52e82fc33cd6854753fb19fc5d6a31af6f0f54c277d6f118ad993e"
    },
    "imagePullSecretList": [],
    "ingress": {
      "main": {
        "advanced": false,
        "enabled": true,
        "hosts": [
          {
            "host": "hass.musson-serv.uk",
            "paths": [
              {
                "path": "/",
                "pathType": "Prefix"
              }
            ]
          }
        ],
        "ingressClassName": "",
        "integrations": {
          "certManager": {
            "certificateIssuer": "cloudflare-prod",
            "enabled": true
          },
          "homepage": {
            "description": "",
            "enabled": true,
            "group": "Smart home",
            "icon": "",
            "name": "",
            "widget": {
              "custom": {
                "key": "REPLACED"
              },
              "customkv": [
                {
                  "key": "fields",
                  "value": "[\"people_home\", \"lights_on\"]"
                }
              ],
              "enabled": true
            }
          },
          "traefik": {
            "allowCors": false,
            "enabled": true,
            "entrypoints": [
              "websecure"
            ],
            "middlewares": []
          }
        },
        "tls": []
      }
    },
    "ingressList": [],
    "ixCertificateAuthorities": {},
    "ixCertificates": {},
    "ixChartContext": {
      "addNvidiaRuntimeClass": false,
      "hasNFSCSI": true,
      "hasSMBCSI": true,
      "isInstall": false,
      "isStopped": false,
      "isUpdate": true,
      "isUpgrade": false,
      "kubernetes_config": {
        "cluster_cidr": "172.16.0.0/16",
        "cluster_dns_ip": "172.17.0.10",
        "service_cidr": "172.17.0.0/16"
      },
      "nfsProvisioner": "nfs.csi.k8s.io",
      "nvidiaRuntimeClassName": "nvidia",
      "operation": "UPDATE",
      "smbProvisioner": "smb.csi.k8s.io",
      "storageClassName": "ix-storage-class-home-assistant",
      "upgradeMetadata": {}
    },
    "ixExternalInterfacesConfiguration": [
      "{\"cniVersion\": \"0.3.1\", \"name\": \"ix-home-assistant-0\", \"type\": \"bridge\", \"bridge\": \"br1\", \"ipam\": {\"type\": \"static\", \"addresses\": [{\"address\": \"10.242.10.42/24\"}], \"routes\": []}}"
    ],
    "ixExternalInterfacesConfigurationNames": [
      "ix-home-assistant-0"
    ],
    "ixVolumes": [],
    "networkPolicy": [],
    "persistence": {
      "config": {
        "enabled": true,
        "mountPath": "/config",
        "readOnly": false,
        "size": "256Gi",
        "static": {
          "mode": "disabled"
        },
        "storageClass": "",
        "targetSelectAll": true,
        "type": "pvc",
        "volsync": [
          {
            "credentials": "backblaze",
            "dest": {
              "enabled": false
            },
            "name": "config",
            "src": {
              "enabled": true
            },
            "type": "restic"
          }
        ],
        "volumeSnapshots": []
      },
      "init": {
        "defaultMode": "0777",
        "enabled": true,
        "mountPath": "/config/init",
        "objectName": "init",
        "readOnly": true,
        "targetSelector": {
          "main": {
            "init": {}
          }
        },
        "type": "configmap"
      }
    },
    "persistenceList": [],
    "podOptions": {
      "expertPodOpts": false
    },
    "portal": {
      "open": {
        "enabled": true
      }
    },
    "prometheus": {
      "serviceMonitor": {
        "enabled": false
      }
    },
    "release_name": "home-assistant",
    "resources": {
      "limits": {
        "amd.com/gpu": 0,
        "cpu": "8000m",
        "gpu.intel.com/i915": 0,
        "memory": "8Gi",
        "nvidia.com/gpu": 0
      },
      "requests": {
        "cpu": "10m",
        "memory": "50Mi"
      }
    },
    "scaleExternalInterface": [
      {
        "hostInterface": "br1",
        "ipam": {
          "staticIPConfigurations": [
            "10.242.10.42/24"
          ],
          "staticRoutes": [],
          "type": "static"
        }
      }
    ],
    "securityContext": {
      "container": {
        "PUID": 568,
        "UMASK": "0022",
        "advanced": false,
        "capabilities": {
          "add": [
            "CAP_NET_RAW",
            "CAP_NET_BIND_SERVICE"
          ]
        },
        "readOnlyRootFilesystem": false,
        "runAsGroup": 0,
        "runAsNonRoot": false,
        "runAsUser": 0
      },
      "pod": {
        "fsGroup": 568,
        "fsGroupChangePolicy": "OnRootMismatch",
        "supplementalGroups": []
      }
    },
    "service": {
      "main": {
        "enabled": true,
        "loadBalancerIP": "",
        "ports": {
          "main": {
            "port": 8123,
            "targetPort": 8123
          }
        },
        "type": "LoadBalancer"
      }
    },
    "serviceList": [],
    "workload": {
      "main": {
        "podSpec": {
          "containers": {
            "main": {
              "advanced": false,
              "envList": [],
              "extraArgs": []
            }
          },
          "initContainers": {
            "init": {
              "command": "/config/init/init.sh",
              "enabled": true,
              "imageSelector": "yqImage",
              "type": "init"
            }
          }
        },
        "replicas": 1,
        "type": "Deployment"
      }
    }
  },
  "container_images_update_available": false,
  "dataset": "pool1/ix-applications/releases/home-assistant",
  "human_latest_version": "25.1.8",
  "human_version": "2024.5.5_25.1.8",
  "id": "home-assistant",
  "info": {
    "deleted": "",
    "description": "Upgrade complete",
    "first_deployed": "2024-04-28T12:03:29.284540506+01:00",
    "last_deployed": "2024-07-22T14:03:37.608687264+01:00",
    "notes": "\n# Thank you for installing home-assistant by TrueCharts.\n\n\n## Connecting externally\nYou can use this Chart by opening one of the following links in your browser:\n- host: hass.musson-serv.uk\npath: /\nport: \"443\"\nportalName: open\nprotocol: https\nurl: https://hass.musson-serv.uk:443/\nuseNodeIP: false\n## Sources for home-assistant\n- https://github.com/cdr/code-server\n- https://github.com/home-assistant/home-assistant\n- https://github.com/truecharts/charts/tree/master/charts/stable/home-assistant\n- https://hub.docker.com/r/homeassistant/home-assistant\n\nSee more for **home-assistant** at (https://truecharts.org/charts/stable/home-assistant)\n\n## Documentation\nPlease check out the TrueCharts documentation on:\nhttps://truecharts.org\n\nOpenSource can only exist with your help, please consider supporting TrueCharts:\nhttps://truecharts.org/sponsor\n",
    "status": "deployed"
  },
  "name": "home-assistant",
  "namespace": "ix-home-assistant",
  "path": "/mnt/pool1/ix-applications/releases/home-assistant",
  "pod_status": {
    "available": 1,
    "desired": 1
  },
  "portals": {
    "open": [
      "https://hass.musson-serv.uk:443/"
    ]
  },
  "status": "ACTIVE",
  "update_available": false,
  "used_ports": [
    {
      "port": 8123,
      "protocol": "TCP"
    }
  ],
  "version": 23
}